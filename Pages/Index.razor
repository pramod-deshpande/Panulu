@page "/"

<Heading Title="Tasks"></Heading>


    @if (taskItems.Any()) {
    @foreach (var item in taskItems) {
        <DataCard taskItem="item"></DataCard>
    }
}









@code{
    List<TaskItem> taskItems = new();


    protected override async Task OnInitializedAsync() {
        await TaskService.CarryOverIncompleteTasksAsync();
        taskItems = GetTasksForToday(await Db.GetItemsAsync());
    }

    private List<TaskItem> GetTasksForToday(List<TaskItem> items) {

        var today = DateTime.Now.Date;
        return items.Where(x => x.TaskDateTime.Value.Date == today && !x.IsCompleted).ToList() ?? new List<TaskItem>();
    }

}
